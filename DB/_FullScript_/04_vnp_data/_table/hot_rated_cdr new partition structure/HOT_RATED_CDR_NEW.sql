DROP TABLE VNP_DATA.HOT_RATED_CDR_NEW CASCADE CONSTRAINTS;

DROP TABLESPACE VNP_DATA_HRC INCLUDING CONTENTS AND DATAFILES;

CREATE TABLESPACE VNP_DATA_HRC DATAFILE 
  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr01.dbf' SIZE 100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED;

--CREATE TABLESPACE VNP_DATA_HRC_P141201_0 DATAFILE 
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_0.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_0_2.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_0_3.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_0_4.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;
--
--
--CREATE TABLESPACE VNP_DATA_HRC_P141201_1 DATAFILE 
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_1.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_1_2.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_1_3.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_1_4.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;
--
--
--CREATE TABLESPACE VNP_DATA_HRC_P141201_2 DATAFILE 
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_2.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_2_2.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_2_3.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_2_4.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;
--
--
--CREATE TABLESPACE VNP_DATA_HRC_P141201_3 DATAFILE 
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_3.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_3_2.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_3_3.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_3_4.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;
--
--
--CREATE TABLESPACE VNP_DATA_HRC_P141201_4 DATAFILE 
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_4.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_4_2.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_4_3.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_4_4.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;
--
--
--CREATE TABLESPACE VNP_DATA_HRC_P141201_5 DATAFILE 
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_5.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_5_2.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_5_3.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_5_4.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;
--
--
--CREATE TABLESPACE VNP_DATA_HRC_P141201_6 DATAFILE 
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_6.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_6_2.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_6_3.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_6_4.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;
--
--
--CREATE TABLESPACE VNP_DATA_HRC_P141201_7 DATAFILE 
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_7.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_7_2.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_7_3.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_7_4.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;
--
--
--CREATE TABLESPACE VNP_DATA_HRC_P141201_8 DATAFILE 
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_8.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_8_2.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_8_3.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_8_4.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;
--
--
--CREATE TABLESPACE VNP_DATA_HRC_P141201_9 DATAFILE 
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_9.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_9_2.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_9_3.dbf' SIZE 1100M AUTOEXTEND ON NEXT 100M MAXSIZE UNLIMITED,
--  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_9_4.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;

CREATE TABLESPACE VNP_DATA_HRC_P141201_0 DATAFILE 
  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_0.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;


CREATE TABLESPACE VNP_DATA_HRC_P141201_1 DATAFILE 
  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_1.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;


CREATE TABLESPACE VNP_DATA_HRC_P141201_2 DATAFILE 
  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_2.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;


CREATE TABLESPACE VNP_DATA_HRC_P141201_3 DATAFILE 
  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_3.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;


CREATE TABLESPACE VNP_DATA_HRC_P141201_4 DATAFILE 
  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_4.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;


CREATE TABLESPACE VNP_DATA_HRC_P141201_5 DATAFILE 
  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_5.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;


CREATE TABLESPACE VNP_DATA_HRC_P141201_6 DATAFILE 
  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_6.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;


CREATE TABLESPACE VNP_DATA_HRC_P141201_7 DATAFILE 
  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_7.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;


CREATE TABLESPACE VNP_DATA_HRC_P141201_8 DATAFILE 
  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_8.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;


CREATE TABLESPACE VNP_DATA_HRC_P141201_9 DATAFILE 
  '+DATA/eonerate/datafile/vnp_data/hot_rated_cdr_P141201_9.dbf' SIZE 10M AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;


CREATE TABLE VNP_DATA.HOT_RATED_CDR_NEW
(
  MAP_ID                NUMBER(9),
  A_NUMBER              VARCHAR2(15 BYTE),
  CDR_TYPE              NUMBER(2),
  CREATED_TIME          DATE                    DEFAULT SYSDATE,
  CDR_START_TIME        DATE,
  DATA_PART             NUMBER(2),
  DURATION              NUMBER(11),
  TOTAL_USAGE           NUMBER(11),
  B_NUMBER              VARCHAR2(31 BYTE),
  B_ZONE                VARCHAR2(127 BYTE),
  NW_GROUP              VARCHAR2(15 BYTE),
  SERVICE_FEE           NUMBER(15,3),
  SERVICE_FEE_ID        NUMBER(3),
  CHARGE_FEE            NUMBER(15,3),
  CHARGE_FEE_ID         NUMBER(5),
  LAC                   VARCHAR2(23 BYTE),
  CELL_ID               VARCHAR2(23 BYTE),
  SUBSCRIBER_UNBILL     CHAR(2 BYTE),
  BU_ID                 VARCHAR2(3 BYTE),
  OLD_BU_ID             VARCHAR2(3 BYTE),
  OFFER_COST            NUMBER(15,3),
  OFFER_FREE_BLOCK      NUMBER(21),
  INTERNAL_COST         NUMBER(15,3),
  INTERNAL_FREE_BLOCK   NUMBER(11),
  DIAL_DIGIT            VARCHAR2(31 BYTE),
  CDR_RECORD_HEADER_ID  NUMBER(11),
  CDR_SEQUENCE_NUMBER   NUMBER(11),
  LOCATION_NO           VARCHAR2(31 BYTE),
  MSC_ID                VARCHAR2(31 BYTE),
  UNIT_TYPE_ID          NUMBER(2),
  PRIMARY_OFFER_ID      NUMBER(10),
  DISCOUNT_ITEM_ID      NUMBER(6),
  BALANCE_CHANGE        VARCHAR2(500 BYTE),
  RERATE_FLAG           NUMBER(2),
  AUT_FINAL_ID          NUMBER(6),
  TARIFF_PLAN_ID        NUMBER(6),
  ERROR_CODE            VARCHAR2(6 BYTE)        DEFAULT 0,
  PAYMENT_ID            NUMBER(6)
)
TABLESPACE VNP_DATA_HRC
PARTITION BY RANGE (CDR_START_TIME)
SUBPARTITION BY RANGE (DATA_PART)
(    
  PARTITION P141201 VALUES LESS THAN (TO_DATE(' 2014-11-26 00:00:00', 'YYYY-MM-DD HH24:MI:SS'))
  ( SUBPARTITION P141201_0 VALUES LESS THAN (1)      TABLESPACE VNP_DATA_HRC_P141201_0,
    SUBPARTITION P141201_1 VALUES LESS THAN (2)      TABLESPACE VNP_DATA_HRC_P141201_1,
    SUBPARTITION P141201_2 VALUES LESS THAN (3)      TABLESPACE VNP_DATA_HRC_P141201_2,
    SUBPARTITION P141201_3 VALUES LESS THAN (4)      TABLESPACE VNP_DATA_HRC_P141201_3,
    SUBPARTITION P141201_4 VALUES LESS THAN (5)      TABLESPACE VNP_DATA_HRC_P141201_4,
    SUBPARTITION P141201_5 VALUES LESS THAN (6)      TABLESPACE VNP_DATA_HRC_P141201_5,
    SUBPARTITION P141201_6 VALUES LESS THAN (7)      TABLESPACE VNP_DATA_HRC_P141201_6,
    SUBPARTITION P141201_7 VALUES LESS THAN (8)      TABLESPACE VNP_DATA_HRC_P141201_7,
    SUBPARTITION P141201_8 VALUES LESS THAN (9)      TABLESPACE VNP_DATA_HRC_P141201_8,
    SUBPARTITION P141201_9 VALUES LESS THAN (10)      TABLESPACE VNP_DATA_HRC_P141201_9 )
);


CREATE INDEX VNP_DATA.IDX_HRC_CDR_START_TIME_2 ON VNP_DATA.HOT_RATED_CDR_NEW
(CDR_START_TIME)
  TABLESPACE VNP_DATA_HRC
NOLOGGING
LOCAL
NOPARALLEL;


CREATE INDEX VNP_DATA.IDX_HRC_RERATE_FLAG_2 ON VNP_DATA.HOT_RATED_CDR_NEW
(RERATE_FLAG)
  TABLESPACE VNP_DATA_HRC
NOLOGGING
LOCAL
NOPARALLEL;

GRANT DELETE, INSERT, SELECT, UPDATE ON VNP_DATA.HOT_RATED_CDR_NEW TO VNP_COMMON;
